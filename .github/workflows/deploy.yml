# Needs YAK_TOKEN (this is already set in this workflow)
name: deploy
on:
  workflow_dispatch:
     inputs:
      update-version:
        type: boolean
        description: Update version
      version:
        description: "Version (x.x.x-suffix)"
        required: false
jobs:
  build:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v3
      - name: Setup Env
        run: |
          chmod +x "${GITHUB_WORKSPACE}/tools/vagrant/setup_ubuntu_18_04.sh"
          "${GITHUB_WORKSPACE}/tools/vagrant/setup_ubuntu_18_04.sh"
      
      - name: Update version
      - if: ${{github.event.inputs.update-version=='true' }}
        run: |
          "${GITHUB_WORKSPACE}/tools/distrib/distrib.sh" update_version ${{github.event.inputs.version}}
          
  

